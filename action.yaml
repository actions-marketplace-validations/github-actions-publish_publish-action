name: 'Publish Github Action'
description: 'Publishes Github action and tags release'
inputs:
  branch:
    description: Branch to commit action to. Default will use the current.
    required: false
  tag:
    description: name of the git tag to use to tag the action.
    required: true
    default: v1

runs:
  using: "composite"
  steps:
    - run: |
        git config --global user.email "${{github.event.pusher.email}}"
        git config --global user.name "${{github.event.pusher.name}}"
      shell: bash
    - run: |
        git tag -fa -m "updating tag for ${{ inputs.tag }}" ${{ inputs.tag }}
        git push --follow-tags
      shell: bash